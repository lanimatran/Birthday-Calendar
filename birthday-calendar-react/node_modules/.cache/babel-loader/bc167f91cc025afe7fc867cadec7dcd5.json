{"ast":null,"code":"import _classCallCheck from\"D:\\\\Projects\\\\Birthday Calendar\\\\birthday-calendar-react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\Projects\\\\Birthday Calendar\\\\birthday-calendar-react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"D:\\\\Projects\\\\Birthday Calendar\\\\birthday-calendar-react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"D:\\\\Projects\\\\Birthday Calendar\\\\birthday-calendar-react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"D:\\\\Projects\\\\Birthday Calendar\\\\birthday-calendar-react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{Formik,Form,Field}from'formik';import*as yup from'yup';import AccountService from'../ApiServices/AccountService';import ApiUtil from'../ApiServices/ApiUtil';import Utility from'../Utility/Utility';import{LOCAL_STORAGE_AUTHENTICATION_TOKEN_KEY,SESSION_STORAGE_AUTHENTICATION_TOKEN_KEY}from'../Utility/GlobalConstants';//import GoogleBtn from '../Buttons/GoogleButton'\nvar logInValidation=yup.object().shape({email:yup.string().email('Invalid email').required(\"Email is required\"),password:yup.string().required(\"Password is required\")});var LogInComponent=/*#__PURE__*/function(_Component){_inherits(LogInComponent,_Component);var _super=_createSuper(LogInComponent);function LogInComponent(props){var _this;_classCallCheck(this,LogInComponent);_this=_super.call(this,props);_this.state={email:'',password:'',willRememberSignIn:false};_this.logIn=_this.logIn.bind(_assertThisInitialized(_this));_this.changeRememberSignInCheck=_this.changeRememberSignInCheck.bind(_assertThisInitialized(_this));return _this;}_createClass(LogInComponent,[{key:\"render\",value:function render(){var _this2=this;var _this$state=this.state,email=_this$state.email,password=_this$state.password;return/*#__PURE__*/React.createElement(\"div\",{className:\"container logInPage\"},/*#__PURE__*/React.createElement(\"div\",{className:\"alert alert-danger\"},\"This is a test server, please do not sign up with your real personal info (you still need a valid email though). \",/*#__PURE__*/React.createElement(\"br\",null),\"Not because this server is not secure but because data on this database will be wiped for live production server (Estimated September 2020)\"),/*#__PURE__*/React.createElement(Formik,{initialValues:{email:email,password:password},onSubmit:this.logIn,validationSchema:logInValidation},function(props){var errors=props.errors,touched=props.touched;return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h1\",null,\"Log In to Birthday Calendar\"),/*#__PURE__*/React.createElement(Form,null,/*#__PURE__*/React.createElement(\"fieldset\",{className:\"form-group\"},/*#__PURE__*/React.createElement(Field,{type:\"email\",name:\"email\",placeholder:\"Email\"})),/*#__PURE__*/React.createElement(\"fieldset\",{className:\"form-group\"},/*#__PURE__*/React.createElement(Field,{type:\"password\",name:\"password\",placeholder:\"Password\"})),/*#__PURE__*/React.createElement(\"fieldset\",{className:\"form-check\"},/*#__PURE__*/React.createElement(\"input\",{type:\"checkbox\",id:\"rememberSignInChk\",checked:_this2.state.willRememberSignIn,onChange:_this2.changeRememberSignInCheck}),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"rememberSignInChk\"},\"\\xA0Remember me on this device\")),/*#__PURE__*/React.createElement(\"button\",{className:\"btn-success\",type:\"submit\"},\"Log In\"),_this2.state.serverErrorMessage?/*#__PURE__*/React.createElement(\"div\",{className:\"alert alert-danger\"},_this2.state.serverErrorMessage):/*#__PURE__*/React.createElement(\"div\",null),errors.email&&touched.email?/*#__PURE__*/React.createElement(\"div\",{className:\"alert alert-danger\"},errors.email):/*#__PURE__*/React.createElement(\"div\",null),errors.password&&touched.password?/*#__PURE__*/React.createElement(\"div\",{className:\"alert alert-danger\"},errors.password):/*#__PURE__*/React.createElement(\"div\",null)));}));}},{key:\"logIn\",value:function logIn(logInCredentials){var _this3=this;this.setState({serverErrorMessage:null});AccountService.logIn(logInCredentials).then(function(response){ApiUtil.setupInterceptors(response.data.token,_this3.props.handler);Utility.saveLocalData(response.data,_this3.state.willRememberSignIn,_this3.props.handler);}).catch(function(error){console.log(error);Utility.defaultApiErrorHandling(error,_this3);});}},{key:\"changeRememberSignInCheck\",value:function changeRememberSignInCheck(event){this.setState({willRememberSignIn:event.target.checked});}}]);return LogInComponent;}(Component);export default LogInComponent;","map":{"version":3,"sources":["D:/Projects/Birthday Calendar/birthday-calendar-react/src/Pages/LogInComponent.jsx"],"names":["React","Component","Formik","Form","Field","yup","AccountService","ApiUtil","Utility","LOCAL_STORAGE_AUTHENTICATION_TOKEN_KEY","SESSION_STORAGE_AUTHENTICATION_TOKEN_KEY","logInValidation","object","shape","email","string","required","password","LogInComponent","props","state","willRememberSignIn","logIn","bind","changeRememberSignInCheck","errors","touched","serverErrorMessage","logInCredentials","setState","then","response","setupInterceptors","data","token","handler","saveLocalData","catch","error","console","log","defaultApiErrorHandling","event","target","checked"],"mappings":"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","sourcesContent":["import React, {Component} from 'react'\r\nimport { Formik, Form, Field } from 'formik'\r\nimport * as yup from 'yup'\r\nimport AccountService from '../ApiServices/AccountService'\r\nimport ApiUtil from '../ApiServices/ApiUtil'\r\nimport Utility from '../Utility/Utility'\r\nimport { LOCAL_STORAGE_AUTHENTICATION_TOKEN_KEY, SESSION_STORAGE_AUTHENTICATION_TOKEN_KEY } from '../Utility/GlobalConstants'\r\n//import GoogleBtn from '../Buttons/GoogleButton'\r\n\r\nconst logInValidation = yup.object().shape({\r\n    email: yup.string()\r\n      .email('Invalid email')\r\n      .required(\"Email is required\"),\r\n    password: yup.string()\r\n        .required(\"Password is required\")\r\n})\r\nclass LogInComponent extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n\r\n        this.state = {\r\n            email: '',\r\n            password: '',\r\n            willRememberSignIn: false\r\n        }\r\n\r\n        this.logIn = this.logIn.bind(this)\r\n        this.changeRememberSignInCheck = this.changeRememberSignInCheck.bind(this)\r\n    }\r\n\r\n    render() {\r\n        let {email, password} = this.state\r\n        return (\r\n            <div className=\"container logInPage\">\r\n                <div className=\"alert alert-danger\">This is a test server, please do not sign up with your real personal info (you still need a valid email though). <br/>\r\n                    Not because this server is not secure but because data on this database will be wiped for live production server (Estimated September 2020)</div>\r\n                <Formik\r\n                    initialValues={{email, password}}\r\n                    onSubmit={this.logIn}\r\n                    validationSchema={logInValidation}\r\n                >\r\n                {\r\n                    (props) => \r\n                    {\r\n                        let {errors, touched} = props\r\n                        return (\r\n                            <div>\r\n                                <h1>Log In to Birthday Calendar</h1>\r\n                                <Form>                                \r\n                                    <fieldset className=\"form-group\">\r\n                                        <Field type=\"email\" name=\"email\" placeholder=\"Email\"/>\r\n                                    </fieldset>          \r\n                                    <fieldset className=\"form-group\">\r\n                                        <Field type=\"password\" name=\"password\" placeholder=\"Password\"/>                                    \r\n                                    </fieldset>\r\n                                    <fieldset className=\"form-check\">\r\n                                        <input type=\"checkbox\" id=\"rememberSignInChk\" checked={this.state.willRememberSignIn} onChange={this.changeRememberSignInCheck}/>\r\n                                        <label htmlFor=\"rememberSignInChk\">&nbsp;Remember me on this device</label>\r\n                                    </fieldset>\r\n                                    <button className=\"btn-success\" type=\"submit\">Log In</button>\r\n                                    {this.state.serverErrorMessage?(<div className=\"alert alert-danger\">{this.state.serverErrorMessage}</div>):(<div></div>)}\r\n                                    {(errors.email && touched.email)?(<div className=\"alert alert-danger\">{errors.email}</div>):(<div></div>)}\r\n                                    {(errors.password && touched.password)?(<div className=\"alert alert-danger\">{errors.password}</div>):(<div></div>)}\r\n                                </Form>\r\n                            </div>                            \r\n                        )\r\n                        \r\n                    }\r\n                }\r\n                </Formik>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    logIn(logInCredentials) {\r\n        this.setState({serverErrorMessage: null})\r\n        AccountService.logIn(logInCredentials)\r\n        .then(\r\n            response => {\r\n                ApiUtil.setupInterceptors(response.data.token, this.props.handler)\r\n                Utility.saveLocalData(response.data, this.state.willRememberSignIn, this.props.handler)\r\n            }\r\n        )\r\n        .catch (\r\n            error => {\r\n                console.log(error)\r\n                Utility.defaultApiErrorHandling(error, this)\r\n            }\r\n        )\r\n    }\r\n\r\n    changeRememberSignInCheck(event) {\r\n        this.setState({willRememberSignIn: event.target.checked })\r\n    }\r\n}\r\n\r\nexport default LogInComponent"]},"metadata":{},"sourceType":"module"}